# -*- coding: UTF-8 -*-
'''
Created on 20 mars 2014

:author: François Royer & Valentin Lhommeau
'''
import enchant
import nltk
from nltk.corpus import stopwords
import treetaggerwrapper

class Analyzer(object):
    '''
    Classe qui permet de remplacer la phase de preprocessing (nettoyage) et de tokenizing (segmentation).
    '''
    def __call__(self, html):
        '''
        :param html: une chaîne de caractère au format html.
        '''
        raw = Analyzer.clean_html(html)
#         raw = Analyzer.clean_raw(raw)
#         tokens = Analyzer.tokenize(raw)
        tokens = Analyzer.tag(raw)
        tokens = Analyzer.clean_stop_words(tokens)
#         tokens = Analyzer.normalize(tokens)
        return tokens
    
    @staticmethod
    def clean_html(html):
        '''
        :param html: une chaîne de caractère au format html.
        :return: une chaîne de caractère brute, vierge de toute balise html.
        '''
        return nltk.clean_html(html).decode('utf-8')
    

    
    @staticmethod
    def tag(text):
        '''
        :param text: une chaîne de caractères brute.
        :return: la liste des <i>noms communs</i> extraits.
        '''
        tagger = treetaggerwrapper.TreeTagger(TAGLANG='fr',
                                              TAGDIR='C:\Program Files\TreeTagger',
                                              TAGINENC='utf-8',
                                              TAGOUTENC='utf-8')
        tags = tagger.TagText(text)
        tokens = [t.split('\t')[2] for t in tags if len(t.split('\t')) >= 3 and t.split('\t')[1] == 'NOM']
#         print(tokens)
        return tokens

    @staticmethod
    def clean_stop_words(text):
        '''
        :param text: une liste de tokens
        :return: la liste des <i>noms communs</i> filtrée par liste de stopwords
        et qui appartiennent au dictionnaire de la langue française.
        '''
        d = enchant.Dict('fr_FR')
        tokens = [w.lower() for w in text if d.check(w)]
        raw_stopword_list = ["Ap.", "Apr.", "GHz", "MHz", "USD", "a", "afin", "ah", "ai", "aie", "aient", "aies", "ait", "alors", "après", "as", "attendu", "au", "au-delà", "au-devant", "aucun", "aucune", "audit", "auprès", "auquel", "aura", "aurai", "auraient", "aurais", "aurait", "auras", "aurez", "auriez", "aurions", "aurons", "auront", "aussi", "autour", "autre", "autres", "autrui", "aux", "auxdites", "auxdits", "auxquelles", "auxquels", "avaient", "avais", "avait", "avant", "avec", "avez", "aviez", "avions", "avons", "ayant", "ayez", "ayons", "b", "bah", "banco", "ben", "bien", "bé", "c", "c'", "c'est", "c'était", "car", "ce", "ceci", "cela", "celle", "celle-ci", "celle-là", "celles", "celles-ci", "celles-là", "celui", "celui-ci", "celui-là", "celà", "cent", "cents", "cependant", "certain", "certaine", "certaines", "certains", "ces", "cet", "cette", "ceux", "ceux-ci", "ceux-là", "cf.", "cg", "cgr", "chacun", "chacune", "chaque", "chez", "ci", "cinq", "cinquante", "cinquante-cinq", "cinquante-deux", "cinquante-et-un", "cinquante-huit", "cinquante-neuf", "cinquante-quatre", "cinquante-sept", "cinquante-six", "cinquante-trois", "cl", "cm", "cm²", "comme", "contre", "d", "d'", "d'après", "d'un", "d'une", "dans", "de", "depuis", "derrière", "des", "desdites", "desdits", "desquelles", "desquels", "deux", "devant", "devers", "dg", "différentes", "différents", "divers", "diverses", "dix", "dix-huit", "dix-neuf", "dix-sept", "dl", "dm", "donc", "dont", "douze", "du", "dudit", "duquel", "durant", "dès", "déjà", "e", "eh", "elle", "elles", "en", "en-dehors", "encore", "enfin", "entre", "envers", "es", "est", "et", "eu", "eue", "eues", "euh", "eurent", "eus", "eusse", "eussent", "eusses", "eussiez", "eussions", "eut", "eux", "eûmes", "eût", "eûtes", "f", "fait", "fi", "flac", "fors", "furent", "fus", "fusse", "fussent", "fusses", "fussiez", "fussions", "fut", "fûmes", "fût", "fûtes", "g", "gr", "h", "ha", "han", "hein", "hem", "heu", "hg", "hl", "hm", "hm³", "holà", "hop", "hormis", "hors", "huit", "hum", "hé", "i", "ici", "il", "ils", "j", "j'", "j'ai", "j'avais", "j'étais", "jamais", "je", "jusqu'", "jusqu'au", "jusqu'aux", "jusqu'à", "jusque", "k", "kg", "km", "km²", "l", "l'", "l'autre", "l'on", "l'un", "l'une", "la", "laquelle", "le", "lequel", "les", "lesquelles", "lesquels", "leur", "leurs", "lez", "lors", "lorsqu'", "lorsque", "lui", "lès", "m", "m'", "ma", "maint", "mainte", "maintes", "maints", "mais", "malgré", "me", "mes", "mg", "mgr", "mil", "mille", "milliards", "millions", "ml", "mm", "mm²", "moi", "moins", "mon", "moyennant", "mt", "m²", "m³", "même", "mêmes", "n", "n'avait", "n'y", "ne", "neuf", "ni", "non", "nonante", "nonobstant", "nos", "notre", "nous", "nul", "nulle", "nº", "néanmoins", "o", "octante", "oh", "on", "ont", "onze", "or", "ou", "outre", "où", "p", "par", "par-delà", "parbleu", "parce", "parmi", "pas", "passé", "pendant", "personne", "peu", "plus", "plus_d'un", "plus_d'une", "plusieurs", "pour", "pourquoi", "pourtant", "pourvu", "près", "puisqu'", "puisque", "q", "qu", "qu'", "qu'elle", "qu'elles", "qu'il", "qu'ils", "qu'on", "quand", "quant", "quarante", "quarante-cinq", "quarante-deux", "quarante-et-un", "quarante-huit", "quarante-neuf", "quarante-quatre", "quarante-sept", "quarante-six", "quarante-trois", "quatorze", "quatre", "quatre-vingt", "quatre-vingt-cinq", "quatre-vingt-deux", "quatre-vingt-dix", "quatre-vingt-dix-huit", "quatre-vingt-dix-neuf", "quatre-vingt-dix-sept", "quatre-vingt-douze", "quatre-vingt-huit", "quatre-vingt-neuf", "quatre-vingt-onze", "quatre-vingt-quatorze", "quatre-vingt-quatre", "quatre-vingt-quinze", "quatre-vingt-seize", "quatre-vingt-sept", "quatre-vingt-six", "quatre-vingt-treize", "quatre-vingt-trois", "quatre-vingt-un", "quatre-vingt-une", "quatre-vingts", "que", "quel", "quelle", "quelles", "quelqu'", "quelqu'un", "quelqu'une", "quelque", "quelques", "quelques-unes", "quelques-uns", "quels", "qui", "quiconque", "quinze", "quoi", "quoiqu'", "quoique", "r", "revoici", "revoilà", "rien", "s", "s'", "sa", "sans", "sauf", "se", "seize", "selon", "sept", "septante", "sera", "serai", "seraient", "serais", "serait", "seras", "serez", "seriez", "serions", "serons", "seront", "ses", "si", "sinon", "six", "soi", "soient", "sois", "soit", "soixante", "soixante-cinq", "soixante-deux", "soixante-dix", "soixante-dix-huit", "soixante-dix-neuf", "soixante-dix-sept", "soixante-douze", "soixante-et-onze", "soixante-et-un", "soixante-et-une", "soixante-huit", "soixante-neuf", "soixante-quatorze", "soixante-quatre", "soixante-quinze", "soixante-seize", "soixante-sept", "soixante-six", "soixante-treize", "soixante-trois", "sommes", "son", "sont", "sous", "soyez", "soyons", "suis", "suite", "sur", "sus", "t", "t'", "ta", "tacatac", "tandis", "te", "tel", "telle", "telles", "tels", "tes", "toi", "ton", "toujours", "tous", "tout", "toute", "toutefois", "toutes", "treize", "trente", "trente-cinq", "trente-deux", "trente-et-un", "trente-huit", "trente-neuf", "trente-quatre", "trente-sept", "trente-six", "trente-trois", "trois", "très", "tu", "u", "un", "une", "unes", "uns", "v", "vers", "via", "vingt", "vingt-cinq", "vingt-deux", "vingt-huit", "vingt-neuf", "vingt-quatre", "vingt-sept", "vingt-six", "vingt-trois", "vis-à-vis", "voici", "voilà", "vos", "votre", "vous", "w", "x", "y", "z", "zéro", "à", "ç'", "ça", "ès", "étaient", "étais", "était", "étant", "étiez", "étions", "été", "étée", "étées", "étés", "êtes", "être", "ô"]
        my_stopword_list = ["abandon", "abbaye", "able", "abolition", "abonné", "abonnement", "abord", "about", "aboutissement", "abrégé", "absence", "absentéisme", "absorption", "abus", "académie", "accent", "accès", "accompagnateur", "accompagnement", "accomplissement", "accord", "accréditation", "accréditeur", "accroissement", "accueil", "accusé", "achat", "achèvement", "acompte", "acquis", "acquisition", "acropole", "acte", "acteur", "actif", "action", "actionnaire", "actionnariat", "active", "activité", "actualisation", "actualité", "addition", "adhérent", "adhésion", "adjoint", "administrateur", "administration", "administré", "adresse", "adulte", "affaire", "affect", "affectation", "affirmation", "affirmative", "age", "âge", "agence", "agencement", "agenda", "agent", "aggravation", "agréé", "agrément", "agression", "aidant", "aide", "ale", "aléa", "alerte", "alexandra", "alinéa", "allée", "alliance", "allier", "allocataire", "allocation", "alternance", "alternative", "ambassade", "ambassadeur", "ambiance", "ambiguïté", "ambition", "amélioration", "amen", "ami", "amont", "an", "analogie", "analyse", "ancien", "angle", "année", "annexe", "anniversaire", "annonce", "annonceur", "annuaire", "annualité", "annuel", "annulation", "anomalie", "anonymat", "anonyme", "anse", "antérieur", "anticipation", "août", "apparition", "appartenance", "appel", "appelant", "appelé", "appellation", "application", "apport", "apposition", "appréciation", "apprenant", "approbation", "approche", "approfondissement", "appropriation", "approuvé", "approvisionnement", "appui", "arrêté", "article", "assistance", "assistant", "association", "associé", "astérisque", "astreinte", "atelier", "atlantique", "atout", "attachement", "attaque", "atteinte", "attente", "attention", "attestation", "attitude", "attributaire", "attribution", "augmentation", "authenticité", "authentification", "automne", "autorisation", "autorité", "auxiliaire", "aval", "avance", "avancé", "avancée", "avancement", "avantage", "avenue", "avril", "axe", "baiser", "baisse", "base", "bénéfice", "bénéficiaire", "besson", "bilan", "blanchet", "bleu", "bouillon", "boulevard", "bouton", "breton", "cabinet", "calcul", "calendrier", "calvados", "calvaire", "candidat", "candidature", "caractère", "caractérisation", "caractéristique", "caution", "cautionnement", "cedex", "centaine", "centenaire", "centre", "certificat", "certificateur", "certification", "certifié", "certitude", "champ", "chance", "change", "changement", "chanoine", "charte", "choix", "cinquantaine", "circonstance", "cité", "civil", "civilité", "clair", "claire", "clarification", "clarté", "classe", "classement", "classification", "clause", "clerc", "coadministrateur", "code", "cohérence", "cohésion", "collaborateur", "collaboration", "collectif", "collection", "collectivité", "collège", "collègue", "colloque", "colonel", "comité", "commandant", "commande", "commandement", "commanditaire", "commémoration", "commencement", "commentaire", "commissariat", "commission", "commun", "communauté", "commune", "communication", "communiqué", "compagnie", "compagnon", "comparaison", "compatibilité", "compensation", "compétence", "compétitivité", "complément", "complémentarité", "complétude", "complexe", "complexité", "comporte", "comportement", "composant", "composante", "composition", "compréhension", "comte", "con", "concept", "concepteur", "conception", "conceptualisation", "concertation", "concession", "conciliation", "concision", "conclusion", "concours", "concurrence", "concurrent", "condé", "condensé", "confédération", "conférence", "configuration", "confirmation", "conflit", "confluence", "conformité", "confort", "confrontation", "congé", "congrès", "congressiste", "conjoint", "conjoncture", "connaissance", "connexion", "conscience", "conscient", "conseil", "conseiller", "conséquence", "consortium", "constance", "constat", "constatation", "constituant", "constitution", "constructeur", "construction", "consultant", "consultation", "contact", "contenu", "contestation", "contexte", "continu", "continuité", "continuum", "contour", "contournement", "contractuel", "contradiction", "contrainte", "contraire", "contrat", "contribution", "controverse", "corps", "correctif", "correction", "correspondance", "correspondant", "corse", "coup", "créance", "créancier", "créativité", "crédit", "cri", "crise", "critère", "croisement", "croissance", "croix", "curie", "date", "dé", "degré", "dehors", "délai", "demain", "demande", "demandeur", "demeure", "demi", "départ", "département", "dépense", "déposant", "dépôt", "der", "dernier", "dérogation", "descendant", "descripteur", "descriptif", "description", "dessus", "destin", "destinataire", "destination", "destinée", "déterminant", "détermination", "dette", "développé", "développement", "devenir", "déviation", "devoir", "dévolu", "dévolution", "différence", "différenciation", "différend", "dimanche", "dimension", "diminution", "direct", "directeur", "direction", "directive", "dirigeant", "discernement", "discours", "discrétion", "discrimination", "discussion", "disparition", "dispense", "disponibilité", "disposant", "dispositif", "disposition", "distance", "distinction", "distributeur", "distribution", "district", "divergence", "diversification", "diversité", "divertissement", "division", "dizaine", "domaine", "domicile", "domiciliation", "donnée", "donneur", "dos", "dose", "dossier", "dur", "durée", "dynamique", "dynamisation", "dynamisme", "dysfonctionnement", "écart", "échange", "échantillon", "échéance", "échéancier", "échec", "échelon", "économe", "économie", "écoute", "écueil", "effectif", "effet", "efficacité", "effluent", "égalité", "élection", "élégance", "élévation", "éligibilité", "élu", "émergence", "émirat", "émotion", "emplacement", "emploi", "employé", "employeur", "emprise", "emprunt", "encadrement", "encaissement", "encart", "encas", "énoncé", "entrée", "entretien", "enveloppe", "envie", "environ", "épanouissement", "équilibre", "équipage", "équipe", "équité", "équivalence", "équivalent", "espace", "espèce", "esplanade", "esprit", "essai", "essor", "estimation", "estime", "estuaire", "établissement", "étalement", "étape", "état", "étendue", "étonnement", "étranger", "étude", "euro", "européen", "événement", "événementiel", "éventualité", "éventuel", "éviction", "évidence", "évolution", "exactitude", "excellence", "exception", "excès", "excitation", "exclusion", "exclusivité", "exécutant", "exécution", "exemplaire", "exemple", "exercice", "exergue", "exhaustivité", "exigence", "exigibilité", "existence", "exonération", "expéditeur", "expédition", "expérience", "expiration", "explication", "exploit", "exploitant", "exploitation", "exposé", "expression", "extension", "extérieur", "externat", "externe", "extrémité", "fa", "fabricant", "fabrication", "fabrique", "facilitation", "facilité", "facturation", "facture", "facturier", "faubourg", "faute", "faveur", "fédération", "femme", "fente", "février", "fiche", "figurant", "figure", "fille", "fin", "finale", "finalité", "finance", "financement", "financier", "florence", "fontainebleau", "for", "forfait", "formalisation", "formalisme", "formalité", "format", "forme", "fréquence", "fréquentation", "frère", "frontignan", "fur", "garçon", "général", "généralisation", "généralité", "génération", "germain", "goût", "gouvernance", "gouvernement", "grâce", "gradation", "grade", "gramme", "grandeur", "gros", "group", "groupe", "groupement", "guerre", "guichet", "guillaume", "havre", "henry", "heure", "hiérarchie", "hiérarchisation", "hiver", "homme", "homogénéité", "homologue", "honneur", "horizon", "hussard", "hypothèse", "idée", "identité", "île", "immédiat", "impact", "impartialité", "impasse", "impératif", "implantation", "implication", "importance", "impossibilité", "impôt", "impulsion", "imputation", "inactivité", "inaptitude", "inauguration", "incitation", "incluant", "incomplet", "inconvénient", "indemnisation", "indemnitaire", "indemnité", "indépendance", "indépendant", "index", "indexation", "indicateur", "indicatif", "indication", "indice", "indispensable", "indisponibilité", "individu", "individualisation", "individuel", "inexactitude", "influence", "infrastructure", "insatisfaction", "inscription", "inscrit", "inscrivant", "installateur", "installation", "instance", "instant", "institut", "institution", "instruction", "insuffisance", "intégralité", "intégrité", "intellectuel", "intelligence", "intendant", "intention", "inter", "intérêt", "intérieur", "interlocuteur", "intermédiaire", "internationalisation", "interne", "interrogation", "interruption", "intervalle", "intervenant", "intervention", "intitulé", "introduction", "inverse", "inversion", "investissement", "invitation", "invite", "item", "janvier", "jeudi", "joint", "jointe", "jour", "journée", "jugement", "juillet", "juin", "jules", "justesse", "justificatif", "justification", "largeur", "légal", "légalité", "législation", "lendemain", "lettre", "lexique", "li", "liaison", "libellé", "libération", "liberté", "lien", "lieu", "lieudit", "livret", "local", "localisation", "logique", "logis", "loi", "loisir", "long", "longtemps", "louis", "lundi", "machine", "madame", "mademoiselle", "mai", "mail", "maintien", "maire", "mairie", "maître", "maîtrise", "majeur", "majorité", "mandant", "mandat", "mandataire", "mandatement", "marc", "marchandise", "marché", "mardi", "marge", "marque", "marqué", "mars", "martyr", "masse", "massif", "mat", "matériel", "matin", "matinée", "max", "maxima", "maximum", "membre", "mention", "mer", "merci", "mercredi", "mercuriale", "merveille", "mesdames", "message", "messagerie", "messieurs", "méta", "méthode", "méthodologie", "métier", "mi", "midi", "milieu", "millier", "million", "mini", "minima", "minimum", "ministère", "ministre", "minuit", "mise", "mission", "mobile", "moitié", "moment", "monde", "mono", "monsieur", "mont", "montant", "montée", "morne", "mot", "moutier", "mouvement", "moyen", "moyenne", "mu", "napoléon", "néant", "nécessité", "négociation", "nom", "nombre", "nomenclature", "nomination", "nord", "note", "notice", "notification", "notion", "nouveau", "nouveauté", "nouvelle", "novembre", "nullité", "numéro", "numérotation", "objectif", "objet", "obligation", "observateur", "observation", "obstacle", "obtention", "occasion", "occupation", "occurrence", "océan", "octobre", "offrant", "offre", "opérateur", "opération", "opinion", "opportunité", "opposition", "ordinaire", "ordonnance", "ordonnancement", "ordonnateur", "organigramme", "organisateur", "organisation", "organisme", "orient", "original", "originalité", "origine", "orne", "ouest", "ouvrage", "ouvrier", "panthéon", "parisien", "parlement", "part", "partage", "partenaire", "partenariat", "parti", "participant", "participation", "participe", "particularité", "particulier", "partie", "partition", "parution", "parvis", "passage", "passager", "passant", "passe", "pasteur", "patrice", "pause", "pauvreté", "perception", "père", "perfectionnement", "performance", "péri", "périgueux", "périmètre", "période", "périodicité", "permanence", "permis", "personnalisation", "personnalité", "personnel", "petit", "peur", "pi", "pièce", "pitié", "place", "plaisir", "planification", "planning", "plate", "pléiade", "pli", "plie", "ploiement", "plupart", "pluralité", "pluton", "poids", "point", "pointe", "pointu", "politique", "pondération", "population", "portée", "portrait", "pose", "posée", "poser", "positif", "position", "positionnement", "possession", "possibilité", "possible", "postulant", "posture", "pot", "potentialité", "potentiel", "pouce", "pourcentage", "poursuite", "pourtour", "pouvoir", "pratique", "pré", "préalable", "préambule", "préavis", "précaution", "précédent", "précis", "précision", "précocité", "préconisation", "préfecture", "préférence", "préfet", "prélèvement", "préliminaire", "premier", "prénom", "presbytère", "prescripteur", "prescription", "présence", "présent", "présentation", "préside", "présidence", "président", "présidente", "prestataire", "prestation", "prêt", "preuve", "prévision", "prévôté", "prévoyance", "prière", "prieur", "prieuré", "prime", "primitif", "prince", "principal", "principe", "priori", "priorité", "prix", "pro", "problématique", "problème", "procédé", "procédure", "procès", "processus", "prochain", "procuration", "producteur", "production", "productivité", "produit", "profession", "professionnalisme", "professionnel", "profil", "profit", "profondeur", "programme", "progrès", "progression", "projet", "prolongation", "prolongement", "promenade", "promesse", "prononciation", "propos", "proposant", "proposition", "propre", "propriétaire", "propriété", "prorata", "prorogation", "provenance", "province", "proviseur", "provision", "proximité", "public", "publique", "puy", "quai", "qualité", "quantité", "quarantaine", "quartier", "quasi", "question", "questionnaire", "questionnement", "quinzaine", "quittance", "quota", "quotidien", "ra", "rabais", "rang", "réalisme", "réalité", "récépissé", "réception", "recette", "recevabilité", "receveur", "recherche", "réclamation", "reclassement", "recommandation", "record", "recours", "recouvrement", "recrutement", "recruteur", "recteur", "rectificatif", "rectification", "recto", "rectorat", "reçu", "recul", "redéfinition", "redevance", "redoute", "réel", "réflexe", "réflexion", "refus", "région", "régional", "régionalisation", "registre", "règlement", "regret", "regroupement", "reine", "rejet", "relâchement", "relais", "relatif", "relève", "religion", "reliquat", "rem", "remarque", "remboursement", "remettant", "remplaçant", "remplacement", "rémunération", "renaissance", "rencontre", "renforcement", "renfort", "renommée", "renoncement", "renonciation", "renouvellement", "renseignement", "rentabilité", "rentrée", "renvoi", "repérage", "repère", "report", "représentant", "représentation", "représentativité", "reprise", "république", "requête", "résidence", "résident", "respect", "responsabilité", "ressortissant", "ressource", "restant", "reste", "résultat", "résumé", "retard", "rets", "réunion", "réussite", "revenu", "revient", "ria", "rial", "ricain", "richard", "richesse", "rickettsie", "riel", "rite", "riverain", "robert", "robustesse", "rose", "rot", "rota", "roule", "route", "roux", "royaume", "rue", "russe", "saint", "saisie", "salaire", "salarié", "salle", "samedi", "savoir", "schéma", "séance", "second", "seine", "sélection", "semaine", "semestre", "sénat", "sénateur", "sensibilisation", "sensibilité", "sentiment", "séparation", "septembre", "serge", "série", "serment", "serveur", "service", "servitude", "session", "seuil", "seul", "sexe", "siècle", "sigle", "signataire", "signature", "signe", "sil", "similitude", "simple", "simplicité", "simplification", "singularité", "sir", "sire", "site", "situation", "soir", "soirée", "soixantaine", "solde", "solidairement", "solide", "solidité", "sommaire", "somme", "sort", "sorte", "sortie", "sortir", "sou", "souci", "souhait", "statut", "structuration", "structure", "subdivision", "substitut", "substitution", "subvention", "succès", "succession", "sud", "suggestion", "suivant", "suivi", "sujet", "superficie", "supérieur", "supplément", "surcroît", "survenance", "survenue", "symbole", "système", "tâche", "talent", "tarif", "tarification", "taxe", "templier", "tempo", "temporalité", "temps", "tenant", "tendance", "tender", "tentative", "tenue", "terme", "test", "tête", "thématique", "thème", "tierce", "tiers", "timing", "titre", "tolérance", "top", "tort", "total", "totalité", "touche", "tournée", "trac", "trace", "tracé", "tradition", "trait", "traité", "trajectoire", "trajet", "transaction", "travail", "travailleur", "trésorerie", "trésorier", "trimestre", "tulle", "type", "typologie", "union", "unitaire", "unité", "univers", "universel", "université", "us", "usage", "usager", "user", "usuel", "usure", "utile", "utilisateur", "utilisation", "vainqueur", "val", "valeur", "validation", "validité", "valorisation", "var", "variante", "variation", "variété", "vecteur", "vendredi", "vente", "verdict", "véronique", "versant", "versement", "version", "verso", "vertical", "vertu", "vichy", "victoire", "vide", "vie", "vieillissement", "vierge", "vigilance", "viguerie", "vigueur", "villa", "village", "ville", "vingtaine", "virement", "virginie", "virgule", "virulence", "vis", "visé", "visée", "visite", "visiteur", "visualisation", "visuel", "vivre", "vocation", "volonté", "vote", "vue", "western", "xi"]
        filtered_word_list = list(set(raw_stopword_list
                                      + my_stopword_list
                                      + stopwords.words('french') 
                                      ))
        return [w for w in tokens if w not in filtered_word_list and w.isalpha()]



#     @staticmethod
#     def clean_raw(raw):
#         '''
#         :param raw: une chaîne de caractères brute.
#         :return: une chaîne de caractère brute
#         '''
# 
#         reg_words = r'''(?xi)
#         ((IX)|(IV)|(VI{0,3})|[^V](I{1,3})[^V])\.
#         |([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})
#         |(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?
#         |\$?\d+(\.\d+)?%?
#         |\d{1,2}\s?[hH]\s?\d{0,2}
#         |[+-]?(\d+\.\d+|\d+\.|\.\d+)
#         |[+-]?\d+
#         |[a-z]+[\'\’\´\`\ʻ\′]
#         |([a-z]\.)+
#         |\.\.\.
#         |[!"#$€%&\'()*+,./:;<=>?@[\]\\^_`{|}~-«»°’-]
#         '''
#         raw = re.sub(reg_words, r' ', raw.decode('utf8'))
#         return raw
             
#     @staticmethod
#     def tokenize(raw):
#         '''
#         :param raw: :param raw: une chaîne de caractères brute.
#         :return: une liste de tokens. 
#         '''
#         tokenizer = RegexpTokenizer('''(?xi)
#         ((IX)|(IV)|(VI{0,3})|[^V](I{1,3})[^V])\.
#         |([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})
#         |(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?
#         |\d+(\.\d+)?\s*%
#         |\d{1,2}\s?[hH]\s?\d{0,2}
#         |[+-]?(\d+\.\d+|\d+\.|\.\d+)
#         |[+-]?\d+
#         |\w+
#         |\.\.\.
#         |[^\w\s]
#         ''')
#         tokens = tokenizer.tokenize(raw)
#         return tokens

#     @staticmethod
#     def normalize(tokens):
#         '''
#         :param tokens: une liste de tokens
#         '''
#         stemmer = FrenchStemmer()
#         return list(set([stemmer.stem(w) for w in tokens]))
    
