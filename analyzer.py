# -*- coding: UTF-8 -*-
'''
Created on 20 mars 2014

@author: tolerantjoker
'''
import re
import enchant
import nltk
from nltk.corpus import stopwords
from nltk.stem.snowball import FrenchStemmer
# from nltk import word_tokenize, wordpunct_tokenize
from nltk.tokenize.regexp import RegexpTokenizer
import treetaggerwrapper

class Analyzer(object):
    '''
    classdocs
    '''
    def __call__(self, html):
        raw = Analyzer.clean_html(html)
#         raw = Analyzer.clean_raw(raw)
#         tokens = Analyzer.tokenize(raw)
        tokens = Analyzer.tag(raw)
        tokens = Analyzer.clean_stop_words(tokens)
#         tokens = Analyzer.normalize(tokens)
        return tokens
    
    @staticmethod
    def clean_html(html):
#         return BeautifulSoup(html).getText()
        return nltk.clean_html(html).decode('utf-8')
    
    @staticmethod
    def clean_raw(raw):
        '''
        Fonction qui supprime toutes les mots et valeurs non porteurs de sens
        |([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6}) --> e-mail
        |(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/? --> url
        |\d{1,2}\s?[hH]\s?\d{0,2} --> horaire
        |[+-]?(\d+\.\d+|\d+\.|\.\d+) --> valeur flottante
        |[+-]?\d+ --> valeur entière
        |\w' --> les contractions d', l', etc.
        |[!"#$%&\'()*+,./:;<=>?@[\]\\^_`{|}~-] --> les ponctuations 
        '''

        reg_words = r'''(?xi)
        ((IX)|(IV)|(VI{0,3})|[^V](I{1,3})[^V])\.
        |([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})
        |(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?
        |\$?\d+(\.\d+)?%?
        |\d{1,2}\s?[hH]\s?\d{0,2}
        |[+-]?(\d+\.\d+|\d+\.|\.\d+)
        |[+-]?\d+
        |[a-z]+[\'\’\´\`\ʻ\′]
        |([a-z]\.)+
        |\.\.\.
        |[!"#$€%&\'()*+,./:;<=>?@[\]\\^_`{|}~-«»°’-]
        '''
        raw = re.sub(reg_words, r' ', raw.decode('utf8'))
        return raw
#             
    @staticmethod
    def tokenize(raw):
#         tokens = wordpunct_tokenize(raw.decode('utf8'))
#         return nltk.Text(tokens,'utf8')
        tokenizer = RegexpTokenizer('''(?xi)
        ((IX)|(IV)|(VI{0,3})|[^V](I{1,3})[^V])\.
        |([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})
        |(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?
        |\d+(\.\d+)?\s*%
        |\d{1,2}\s?[hH]\s?\d{0,2}
        |[+-]?(\d+\.\d+|\d+\.|\.\d+)
        |[+-]?\d+
        |\w+
        |\.\.\.
        |[^\w\s]
        ''')
        tokens = tokenizer.tokenize(raw)
        return tokens
    
    @staticmethod
    def tag(text):
        tagger = treetaggerwrapper.TreeTagger(TAGLANG='fr',
                                              TAGDIR='C:\Program Files\TreeTagger',
                                              TAGINENC='utf-8',
                                              TAGOUTENC='utf-8')
        tags = tagger.TagText(text)
        tokens = [t.split('\t')[2] for t in tags if len(t.split('\t')) >= 3 and t.split('\t')[1] == 'NOM']
#         print(tokens)
        return tokens
    
    @staticmethod
    def clean_stop_words(text):
        d = enchant.Dict('fr_FR')
        tokens = [w.lower() for w in text if d.check(w)]
#         tokens = [w.lower() for w in text]
        raw_stopword_list = ["Ap.", "Apr.", "GHz", "MHz", "USD", "a", "afin", "ah", "ai", "aie", "aient", "aies", "ait", "alors", "après", "as", "attendu", "au", "au-delà", "au-devant", "aucun", "aucune", "audit", "auprès", "auquel", "aura", "aurai", "auraient", "aurais", "aurait", "auras", "aurez", "auriez", "aurions", "aurons", "auront", "aussi", "autour", "autre", "autres", "autrui", "aux", "auxdites", "auxdits", "auxquelles", "auxquels", "avaient", "avais", "avait", "avant", "avec", "avez", "aviez", "avions", "avons", "ayant", "ayez", "ayons", "b", "bah", "banco", "ben", "bien", "bé", "c", "c'", "c'est", "c'était", "car", "ce", "ceci", "cela", "celle", "celle-ci", "celle-là", "celles", "celles-ci", "celles-là", "celui", "celui-ci", "celui-là", "celà", "cent", "cents", "cependant", "certain", "certaine", "certaines", "certains", "ces", "cet", "cette", "ceux", "ceux-ci", "ceux-là", "cf.", "cg", "cgr", "chacun", "chacune", "chaque", "chez", "ci", "cinq", "cinquante", "cinquante-cinq", "cinquante-deux", "cinquante-et-un", "cinquante-huit", "cinquante-neuf", "cinquante-quatre", "cinquante-sept", "cinquante-six", "cinquante-trois", "cl", "cm", "cm²", "comme", "contre", "d", "d'", "d'après", "d'un", "d'une", "dans", "de", "depuis", "derrière", "des", "desdites", "desdits", "desquelles", "desquels", "deux", "devant", "devers", "dg", "différentes", "différents", "divers", "diverses", "dix", "dix-huit", "dix-neuf", "dix-sept", "dl", "dm", "donc", "dont", "douze", "du", "dudit", "duquel", "durant", "dès", "déjà", "e", "eh", "elle", "elles", "en", "en-dehors", "encore", "enfin", "entre", "envers", "es", "est", "et", "eu", "eue", "eues", "euh", "eurent", "eus", "eusse", "eussent", "eusses", "eussiez", "eussions", "eut", "eux", "eûmes", "eût", "eûtes", "f", "fait", "fi", "flac", "fors", "furent", "fus", "fusse", "fussent", "fusses", "fussiez", "fussions", "fut", "fûmes", "fût", "fûtes", "g", "gr", "h", "ha", "han", "hein", "hem", "heu", "hg", "hl", "hm", "hm³", "holà", "hop", "hormis", "hors", "huit", "hum", "hé", "i", "ici", "il", "ils", "j", "j'", "j'ai", "j'avais", "j'étais", "jamais", "je", "jusqu'", "jusqu'au", "jusqu'aux", "jusqu'à", "jusque", "k", "kg", "km", "km²", "l", "l'", "l'autre", "l'on", "l'un", "l'une", "la", "laquelle", "le", "lequel", "les", "lesquelles", "lesquels", "leur", "leurs", "lez", "lors", "lorsqu'", "lorsque", "lui", "lès", "m", "m'", "ma", "maint", "mainte", "maintes", "maints", "mais", "malgré", "me", "mes", "mg", "mgr", "mil", "mille", "milliards", "millions", "ml", "mm", "mm²", "moi", "moins", "mon", "moyennant", "mt", "m²", "m³", "même", "mêmes", "n", "n'avait", "n'y", "ne", "neuf", "ni", "non", "nonante", "nonobstant", "nos", "notre", "nous", "nul", "nulle", "nº", "néanmoins", "o", "octante", "oh", "on", "ont", "onze", "or", "ou", "outre", "où", "p", "par", "par-delà", "parbleu", "parce", "parmi", "pas", "passé", "pendant", "personne", "peu", "plus", "plus_d'un", "plus_d'une", "plusieurs", "pour", "pourquoi", "pourtant", "pourvu", "près", "puisqu'", "puisque", "q", "qu", "qu'", "qu'elle", "qu'elles", "qu'il", "qu'ils", "qu'on", "quand", "quant", "quarante", "quarante-cinq", "quarante-deux", "quarante-et-un", "quarante-huit", "quarante-neuf", "quarante-quatre", "quarante-sept", "quarante-six", "quarante-trois", "quatorze", "quatre", "quatre-vingt", "quatre-vingt-cinq", "quatre-vingt-deux", "quatre-vingt-dix", "quatre-vingt-dix-huit", "quatre-vingt-dix-neuf", "quatre-vingt-dix-sept", "quatre-vingt-douze", "quatre-vingt-huit", "quatre-vingt-neuf", "quatre-vingt-onze", "quatre-vingt-quatorze", "quatre-vingt-quatre", "quatre-vingt-quinze", "quatre-vingt-seize", "quatre-vingt-sept", "quatre-vingt-six", "quatre-vingt-treize", "quatre-vingt-trois", "quatre-vingt-un", "quatre-vingt-une", "quatre-vingts", "que", "quel", "quelle", "quelles", "quelqu'", "quelqu'un", "quelqu'une", "quelque", "quelques", "quelques-unes", "quelques-uns", "quels", "qui", "quiconque", "quinze", "quoi", "quoiqu'", "quoique", "r", "revoici", "revoilà", "rien", "s", "s'", "sa", "sans", "sauf", "se", "seize", "selon", "sept", "septante", "sera", "serai", "seraient", "serais", "serait", "seras", "serez", "seriez", "serions", "serons", "seront", "ses", "si", "sinon", "six", "soi", "soient", "sois", "soit", "soixante", "soixante-cinq", "soixante-deux", "soixante-dix", "soixante-dix-huit", "soixante-dix-neuf", "soixante-dix-sept", "soixante-douze", "soixante-et-onze", "soixante-et-un", "soixante-et-une", "soixante-huit", "soixante-neuf", "soixante-quatorze", "soixante-quatre", "soixante-quinze", "soixante-seize", "soixante-sept", "soixante-six", "soixante-treize", "soixante-trois", "sommes", "son", "sont", "sous", "soyez", "soyons", "suis", "suite", "sur", "sus", "t", "t'", "ta", "tacatac", "tandis", "te", "tel", "telle", "telles", "tels", "tes", "toi", "ton", "toujours", "tous", "tout", "toute", "toutefois", "toutes", "treize", "trente", "trente-cinq", "trente-deux", "trente-et-un", "trente-huit", "trente-neuf", "trente-quatre", "trente-sept", "trente-six", "trente-trois", "trois", "très", "tu", "u", "un", "une", "unes", "uns", "v", "vers", "via", "vingt", "vingt-cinq", "vingt-deux", "vingt-huit", "vingt-neuf", "vingt-quatre", "vingt-sept", "vingt-six", "vingt-trois", "vis-à-vis", "voici", "voilà", "vos", "votre", "vous", "w", "x", "y", "z", "zéro", "à", "ç'", "ça", "ès", "étaient", "étais", "était", "étant", "étiez", "étions", "été", "étée", "étées", "étés", "êtes", "être", "ô"]
        my_stopword_list = ["lot", "décembre", "île", "événementiel", "événement", "évolution", "évidence", "éviction", "éventuel", "éventualité", "étude", "étranger", "étonnement", "étendue", "état", "étape", "étalement", "établissement", "équivalent", "équivalence", "équité", "équipe", "équipage", "équilibre", "épanouissement", "énoncé", "émotion", "émirat", "émergence", "élévation", "élégance", "élu", "éligibilité", "élection", "égalité", "écueil", "écoute", "économie", "économe", "échéancier", "échéance", "échelon", "échec", "échantillon", "échange", "écart", "âge", "xi", "western", "véronique", "vue", "vote", "volonté", "vocation", "vivre", "visée", "visé", "visuel", "visualisation", "visiteur", "visite", "vis", "virulence", "virgule", "virginie", "virement", "vingtaine", "ville", "village", "villa", "vigueur", "viguerie", "vigilance", "vierge", "vieillissement", "vie", "vide", "victoire", "vichy", "vertu", "vertical", "verso", "version", "versement", "versant", "verdict", "vente", "vendredi", "vecteur", "variété", "variation", "variante", "var", "valorisation", "validité", "validation", "valeur", "val", "vainqueur", "utilisation", "utilisateur", "utile", "usure", "usuel", "user", "usager", "usage", "us", "université", "universel", "univers", "unité", "unitaire", "union", "tête", "tâche", "typologie", "type", "tulle", "trésorier", "trésorerie", "trimestre", "travailleur", "travail", "transaction", "trajet", "trajectoire", "traité", "trait", "tradition", "tracé", "trace", "trac", "tournée", "touche", "totalité", "total", "tort", "top", "tolérance", "titre", "timing", "tiers", "tierce", "thématique", "thème", "test", "terme", "tenue", "tentative", "tender", "tendance", "tenant", "temps", "temporalité", "tempo", "templier", "taxe", "tarification", "tarif", "talent", "série", "séparation", "sénateur", "sénat", "sélection", "séance", "système", "symbole", "survenue", "survenance", "surcroît", "supérieur", "supplément", "superficie", "sujet", "suivi", "suivant", "suggestion", "sud", "succès", "succession", "subvention", "substitution", "substitut", "subdivision", "structure", "structuration", "statut", "souhait", "souci", "sou", "sortir", "sortie", "sorte", "sort", "somme", "sommaire", "solidité", "solide", "solidairement", "solde", "soixantaine", "soirée", "soir", "siècle", "situation", "site", "sire", "sir", "singularité", "simplification", "simplicité", "simple", "similitude", "sil", "signe", "signature", "signataire", "sigle", "sexe", "seul", "seuil", "session", "servitude", "service", "serveur", "serment", "serge", "septembre", "sentiment", "sensibilité", "sensibilisation", "semestre", "semaine", "seine", "second", "schéma", "savoir", "samedi", "salle", "salarié", "salaire", "saisie", "saint", "réussite", "réunion", "résumé", "résultat", "résident", "résidence", "république", "rémunération", "régionalisation", "régional", "région", "réflexion", "réflexe", "réel", "récépissé", "réclamation", "réception", "réalité", "réalisme", "règlement", "russe", "rue", "royaume", "roux", "route", "roule", "rota", "rot", "rose", "robustesse", "robert", "riverain", "rite", "riel", "rickettsie", "richesse", "richard", "ricain", "rial", "ria", "reçu", "revient", "revenu", "rets", "retard", "reste", "restant", "ressource", "ressortissant", "responsabilité", "respect", "requête", "repérage", "repère", "représentativité", "représentation", "représentant", "reprise", "report", "renvoi", "rentrée", "rentabilité", "renseignement", "renouvellement", "renonciation", "renoncement", "renommée", "renfort", "renforcement", "rencontre", "renaissance", "remplaçant", "remplacement", "remettant", "remboursement", "remarque", "rem", "relève", "relâchement", "reliquat", "religion", "relatif", "relais", "rejet", "reine", "regroupement", "regret", "registre", "refus", "redéfinition", "redoute", "redevance", "recul", "rectorat", "recto", "rectification", "rectificatif", "recteur", "recruteur", "recrutement", "recouvrement", "recours", "record", "recommandation", "reclassement", "recherche", "receveur", "recevabilité", "recette", "rang", "rabais", "ra", "quotidien", "quota", "quittance", "quinzaine", "questionnement", "questionnaire", "question", "quasi", "quartier", "quarantaine", "quantité", "qualité", "quai", "périodicité", "période", "périmètre", "périgueux", "péri", "père", "puy", "publique", "public", "prêt", "prévôté", "prévoyance", "prévision", "présidente", "président", "présidence", "préside", "présentation", "présent", "présence", "prénom", "prélèvement", "préliminaire", "préférence", "préfet", "préfecture", "précédent", "préconisation", "précocité", "précision", "précis", "précaution", "préavis", "préambule", "préalable", "pré", "proximité", "provision", "proviseur", "province", "provenance", "prorogation", "prorata", "propriété", "propriétaire", "propre", "proposition", "proposant", "propos", "prononciation", "promesse", "promenade", "prolongement", "prolongation", "projet", "progrès", "progression", "programme", "profondeur", "profit", "profil", "professionnel", "professionnalisme", "profession", "produit", "productivité", "production", "producteur", "procédé", "procédure", "procès", "procuration", "prochain", "processus", "problématique", "problème", "pro", "prière", "prix", "priorité", "priori", "principe", "principal", "prince", "primitif", "prime", "prieuré", "prieur", "preuve", "prestation", "prestataire", "prescription", "prescripteur", "presbytère", "premier", "pratique", "pouvoir", "pourtour", "poursuite", "pourcentage", "pouce", "potentiel", "potentialité", "pot", "posée", "posture", "postulant", "possible", "possibilité", "possession", "positionnement", "position", "positif", "poser", "pose", "portée", "portrait", "population", "pondération", "politique", "pointu", "pointe", "point", "poids", "pléiade", "pluton", "pluralité", "plupart", "ploiement", "plie", "pli", "plate", "planning", "planification", "plaisir", "place", "pièce", "pitié", "pi", "peur", "petit", "personnel", "personnalité", "personnalisation", "permis", "permanence", "performance", "perfectionnement", "perception", "pauvreté", "pause", "patrice", "pasteur", "passe", "passant", "passager", "passage", "parvis", "parution", "partition", "partie", "particulier", "particularité", "participe", "participation", "participant", "parti", "partenariat", "partenaire", "partage", "part", "parlement", "parisien", "panthéon", "ouvrier", "ouvrage", "ouest", "orne", "origine", "originalité", "original", "orient", "organisme", "organisation", "organisateur", "organigramme", "ordonnateur", "ordonnancement", "ordonnance", "ordinaire", "opération", "opérateur", "opposition", "opportunité", "opinion", "offre", "offrant", "océan", "octobre", "occurrence", "occupation", "occasion", "obtention", "obstacle", "observation", "observateur", "obligation", "objet", "objectif", "négociation", "nécessité", "néant", "numérotation", "numéro", "nullité", "novembre", "nouvelle", "nouveauté", "nouveau", "notion", "notification", "notice", "note", "nord", "nomination", "nomenclature", "nombre", "nom", "napoléon", "métier", "méthodologie", "méthode", "méta", "mu", "moyenne", "moyen", "mouvement", "moutier", "mot", "morne", "montée", "montant", "mont", "monsieur", "mono", "monde", "moment", "moitié", "mobile", "mission", "mise", "minuit", "ministère", "ministre", "minimum", "minima", "mini", "million", "millier", "milieu", "midi", "mi", "messieurs", "messagerie", "message", "mesdames", "merveille", "mercuriale", "mercredi", "merci", "mer", "mention", "membre", "maîtrise", "maître", "maximum", "maxima", "max", "matériel", "matinée", "matin", "mat", "massif", "masse", "martyr", "mars", "marqué", "marque", "marge", "mardi", "marché", "marchandise", "marc", "mandatement", "mandataire", "mandat", "mandant", "majorité", "majeur", "mairie", "maire", "maintien", "mail", "mai", "mademoiselle", "madame", "machine", "législation", "légalité", "légal", "lundi", "louis", "longtemps", "long", "loisir", "loi", "logis", "logique", "localisation", "local", "livret", "lieudit", "lieu", "lien", "libération", "liberté", "libellé", "liaison", "li", "lexique", "lettre", "lendemain", "largeur", "justification", "justificatif", "justesse", "jules", "juin", "juillet", "jugement", "journée", "jour", "jointe", "joint", "jeudi", "janvier", "item", "invite", "invitation", "investissement", "inversion", "inverse", "intérêt", "intérieur", "intégrité", "intégralité", "introduction", "intitulé", "intervention", "intervenant", "intervalle", "interruption", "interrogation", "interne", "internationalisation", "intermédiaire", "interlocuteur", "inter", "intention", "intendant", "intelligence", "intellectuel", "insuffisance", "instruction", "institution", "institut", "instant", "instance", "installation", "installateur", "inscrivant", "inscrit", "inscription", "insatisfaction", "infrastructure", "influence", "inexactitude", "indépendant", "indépendance", "individuel", "individualisation", "individu", "indisponibilité", "indispensable", "indice", "indication", "indicatif", "indicateur", "indexation", "index", "indemnité", "indemnitaire", "indemnisation", "inconvénient", "incomplet", "incluant", "incitation", "inauguration", "inaptitude", "inactivité", "impôt", "impératif", "imputation", "impulsion", "impossibilité", "importance", "implication", "implantation", "impasse", "impartialité", "impact", "immédiat", "idée", "identité", "hypothèse", "hussard", "horizon", "honneur", "homologue", "homogénéité", "homme", "hiérarchisation", "hiérarchie", "hiver", "heure", "henry", "havre", "génération", "généralité", "généralisation", "général", "guillaume", "guichet", "guerre", "grâce", "groupement", "groupe", "group", "gros", "grandeur", "gramme", "grade", "gradation", "goût", "gouvernement", "gouvernance", "germain", "garçon", "février", "fédération", "fur", "fréquentation", "fréquence", "frère", "frontignan", "forme", "format", "formalité", "formalisme", "formalisation", "forfait", "for", "fontainebleau", "florence", "financier", "financement", "finance", "finalité", "finale", "fin", "fille", "figure", "figurant", "fiche", "fente", "femme", "faveur", "faute", "faubourg", "facturier", "facture", "facturation", "facilité", "facilitation", "fabrique", "fabrication", "fabricant", "fa", "exécution", "exécutant", "extérieur", "extrémité", "externe", "externat", "extension", "expérience", "expédition", "expéditeur", "expression", "exposé", "exploitation", "exploitant", "exploit", "explication", "expiration", "exonération", "existence", "exigibilité", "exigence", "exhaustivité", "exergue", "exercice", "exemple", "exemplaire", "excès", "exclusivité", "exclusion", "excitation", "exception", "excellence", "exactitude", "européen", "euro", "estuaire", "estime", "estimation", "essor", "essai", "espèce", "esprit", "esplanade", "espace", "environ", "envie", "enveloppe", "entrée", "entretien", "encas", "encart", "encaissement", "encadrement", "emprunt", "emprise", "employé", "employeur", "emploi", "emplacement", "effluent", "efficacité", "effet", "effectif", "dévolution", "dévolu", "déviation", "développé", "développement", "détermination", "déterminant", "dérogation", "dépôt", "déposant", "dépense", "département", "départ", "délai", "dé", "dysfonctionnement", "dynamisme", "dynamisation", "dynamique", "durée", "dur", "dossier", "dose", "dos", "donnée", "donneur", "domiciliation", "domicile", "domaine", "dizaine", "division", "divertissement", "diversité", "diversification", "divergence", "district", "distribution", "distributeur", "distinction", "distance", "disposition", "dispositif", "disposant", "disponibilité", "dispense", "disparition", "discussion", "discrétion", "discrimination", "discours", "discernement", "dirigeant", "directive", "direction", "directeur", "direct", "diminution", "dimension", "dimanche", "différend", "différenciation", "différence", "devoir", "devenir", "dette", "destinée", "destination", "destinataire", "destin", "dessus", "description", "descriptif", "descripteur", "descendant", "dernier", "der", "demi", "demeure", "demandeur", "demande", "demain", "dehors", "degré", "date", "curie", "crédit", "créativité", "créancier", "créance", "croix", "croissance", "croisement", "critère", "crise", "cri", "coup", "corse", "correspondant", "correspondance", "correction", "correctif", "corps", "controverse", "contribution", "contrat", "contraire", "contrainte", "contradiction", "contractuel", "contournement", "contour", "continuum", "continuité", "continu", "contexte", "contestation", "contenu", "contact", "conséquence", "consultation", "consultant", "construction", "constructeur", "constitution", "constituant", "constatation", "constat", "constance", "consortium", "conseiller", "conseil", "conscient", "conscience", "connexion", "connaissance", "conjoncture", "conjoint", "congé", "congrès", "congressiste", "conférence", "confédération", "confrontation", "confort", "conformité", "confluence", "conflit", "confirmation", "configuration", "condé", "condensé", "concurrent", "concurrence", "concours", "conclusion", "concision", "conciliation", "concession", "concertation", "conceptualisation", "conception", "concepteur", "concept", "con", "comte", "compétitivité", "compétence", "compréhension", "composition", "composante", "composant", "comportement", "comporte", "complétude", "complémentarité", "complément", "complexité", "complexe", "compensation", "compatibilité", "comparaison", "compagnon", "compagnie", "commémoration", "communiqué", "communication", "commune", "communauté", "commun", "commission", "commissariat", "commentaire", "commencement", "commanditaire", "commandement", "commande", "commandant", "comité", "colonel", "collègue", "collège", "colloque", "collectivité", "collection", "collectif", "collaboration", "collaborateur", "cohésion", "cohérence", "code", "coadministrateur", "clerc", "clause", "classification", "classement", "classe", "clarté", "clarification", "claire", "clair", "civilité", "civil", "cité", "circonstance", "cinquantaine", "choix", "charte", "chanoine", "changement", "change", "chance", "champ", "certitude", "certifié", "certification", "certificateur", "certificat", "centre", "centenaire", "centaine", "cedex", "cautionnement", "caution", "caractéristique", "caractérisation", "caractère", "candidature", "candidat", "calvaire", "calvados", "calendrier", "calcul", "cabinet", "bénéficiaire", "bénéfice", "breton", "bouton", "boulevard", "bouillon", "bleu", "blanchet", "bilan", "besson", "base", "baisse", "baiser", "axe", "avril", "avenue", "avantage", "avancée", "avancé", "avancement", "avance", "aval", "auxiliaire", "autorité", "autorisation", "automne", "authentification", "authenticité", "augmentation", "attribution", "attributaire", "attitude", "attestation", "attention", "attente", "atteinte", "attaque", "attachement", "atout", "atlantique", "atelier", "astérisque", "astreinte", "associé", "association", "assistant", "assistance", "article", "arrêté", "appui", "appréciation", "approvisionnement", "approuvé", "appropriation", "approfondissement", "approche", "approbation", "apprenant", "apposition", "apport", "application", "appelé", "appellation", "appelant", "appel", "appartenance", "apparition", "août", "antérieur", "anticipation", "anse", "anonyme", "anonymat", "anomalie", "année", "annulation", "annuel", "annualité", "annuaire", "annonceur", "annonce", "anniversaire", "annexe", "angle", "ancien", "analyse", "analogie", "an", "amélioration", "amont", "ami", "amen", "ambition", "ambiguïté", "ambiance", "ambassadeur", "ambassade", "aléa", "alternative", "alternance", "allée", "allocation", "allocataire", "allier", "alliance", "alinéa", "alexandra", "alerte", "ale", "aide", "aidant", "agréé", "agrément", "agression", "aggravation", "agent", "agenda", "agencement", "agence", "age", "affirmative", "affirmation", "affectation", "affect", "affaire", "adulte", "adresse", "administré", "administration", "administrateur", "adjoint", "adhésion", "adhérent", "addition", "actualité", "actualisation", "activité", "active", "actionnariat", "actionnaire", "action", "actif", "acteur", "acte", "acropole", "acquisition", "acquis", "acompte", "achèvement", "achat", "accès", "accusé", "accueil", "accréditeur", "accréditation", "accroissement", "accord", "accomplissement", "accompagnement", "accompagnateur", "accent", "académie", "abus", "absorption", "absentéisme", "absence", "abrégé", "aboutissement", "about", "abord", "abonné", "abonnement", "abolition", "able", "abbaye", "abandon"]
        filtered_word_list = list(set(raw_stopword_list
                                      + my_stopword_list
                                      + stopwords.words('french') 
                                      ))
#         filtered_word_list = set(stopwords.words('french'))
#         return [w for w in tokens if w not in filtered_word_list and w.isalpha()]
        return [w for w in tokens if w not in filtered_word_list and w.isalpha()]
    
    @staticmethod
    def normalize(tokens):
        stemmer = FrenchStemmer()
        return list(set([stemmer.stem(w) for w in tokens]))
    
